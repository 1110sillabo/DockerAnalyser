#scanner image
FROM python

ARG deploy

RUN mkdir /code

WORKDIR /code

COPY  pyFinder/requirements.txt /code/

RUN pip install  --upgrade pip
RUN pip install -r requirements.txt


COPY pyFinder/ /code

# deploy-package containing the user-defined analysis function
#COPY deploy-package-graph/ /code/pyfinder/deploy

RUN echo "Deploying analysis function in: $deploy"
COPY "$deploy"/ /code/pyfinder/deploy

RUN pip install -r /code/pyfinder/deploy/requirements.txt

ENTRYPOINT ["python","/code/entryScanner.py"]
CMD ["--help"]
